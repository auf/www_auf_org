{% load static from staticfiles %}
{% load sekizai_tags thumbnail %}
{% spaceless %}

{% addtoblock "js" %}
   <script type="text/javascript" src="{% static 'adminsortable/js/jquery-ui-django-admin.min.js' %}"></script>
   <script type="text/javascript" src="{% static 'adminsortable/js/jquery.django-csrf.js' %}"></script>
   <script src="{% static 'adminsortable/js/admin.sortable.tabular.inlines.js' %}"></script>
{% endaddtoblock %}

{% addtoblock "css" %}
<style type="text/css">
<link rel="stylesheet" type="text/css" href="{% static 'adminsortable/css/admin.sortable.inline.css' %}

.carousel {
  margin: auto;
  max-width: {{ instance.width }}px;
  max-height: {{ instance.height }}px;
}

.carousel-caption {
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  padding: 15px;
  background: #333333;
  background: rgba(0, 0, 0, 0.75);
}

.carousel-caption h4,
.carousel-caption p {
  line-height: 20px;
  color: #ffffff;
}

.carousel-caption h4 {
  margin: 0 0 5px;
}

.carousel-caption p {
  margin-bottom: 0;
}
</style>
{% endaddtoblock %}


<div id="{{ instance.domid }}" class="carousel slide" data-ride="carousel">
  {% if instance.show_indicator %}
  <ol class="carousel-indicators">
    {% for item in instance.carouselitem_set.all %}
    <li data-target="#{{ instance.domid }}" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></li>
    {% endfor %}
  </ol>
  {% endif %}

  <div class="carousel-inner" role="listbox">
    {% for item in instance.carouselitem_set.all %}
    <div class="{% if forloop.first %}active {% endif %}item">
      {% if item.url %}
        <a href="{{ item.url }}">
      {% endif %}
      {% if item.image %}
        <img alt="" src="{% thumbnail item.image instance.size upscale %}">
      {% endif %}
      {% if item.url %}
        </a>
      {% endif %}
      {% if instance.show_caption or instance.show_title %}
        <div class="carousel-caption">
        {% if instance.show_title %}
          <h4>{{ item.caption_title }}</h4>
        {% endif %}
        {% if instance.show_caption %}
          <p>{{ item.caption_content }}</p>
        {% endif %}
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  {% if instance.show_controls %}
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#{{ instance.domid }}" data-slide="prev">
	                <i class="fa fa-chevron-circle-left"></i>
	                <span class="sr-only">Précédent</span>
  </a>
  <a class="carousel-control right" href="#{{ instance.domid }}" data-slide="next">
	                <i class="fa fa-chevron-circle-right"></i>
	                <span class="sr-only">Suivant</span>
  </a>
  {% endif %}
</div>

{% endspaceless %}
